# Default values for facebook-apps.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# app name
fullnameOverride: "fb-apps"

# deployment spec
replicaCount: 1
restartPolicy: Always

# containers
containers:
  - name: fb-apps
    image: "eu.gcr.io/dnt-docker-registry-public/facebook-apps"
    tag: ab5f06ea9
    pullPolicy: IfNotPresent
    environment:
      VIRTUAL_HOST: "https://facebook-apps.app.dnt.no/*"
      VIRTUAL_HOST_WEIGHT: 20
    ports:
      - name: "http"
        containerPort: 80
        protocol: TCP
    resources: {}
      # limits:
      #  cpu: 100m
      #  memory: 128Mi
      # requests:
      #  cpu: 100m
      #  memory: 128Mi
    # livenessProbe:
    #   path:
    #   port:
    # readinessProbe:
    #   path:
    #   port:

# services
services:
  - name: fb-apps
    type: ClusterIP
    port: 80

ingress:
  # Used to create an Ingress record.
  enabled: true
  hosts:
    - host: test-k8s-dev-facebook-apps.dnt.no
      path: /
      serviceName: fb-apps
      servicePort: 80
  annotations:
    kubernetes.io/ingress.class: nginx

  tls:
    - secretName: fb-apps-tls
      hosts:
        - test-k8s-dev-facebook-apps.dnt.no
cert:
  issuer: "letsencrypt-production"
